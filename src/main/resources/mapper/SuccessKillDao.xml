<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.seckill.dao.SuccessKilledDao">
  <insert id="insertSuccessKilled">
insert  into success_killed(seckill_id,user_phone,create_time)
VALUES (#{seckillId},#{userPhone},sysdate)
  </insert>
  
  <select id="queryByIdWithSeckill" resultType="org.seckill.entity.SuccessKilled">
  <!-- 直接映射实体 -->
  select 
  sk.seckill_id,
  sk.user_phone,
  sk.create_time,
  sk.state,
  s.seckill_id "seckill.seckill_id",
  s.sec_name "seckill.sec_name",
  s.sec_number "seckill.sec_number",
  s.start_time "seckill.start_time",
  s.end_time "seckill.end_time",
  s.create_time "seckill.create_time"
  from success_killed sk 
  inner join seckill s on sk.seckill_id=s.seckill_id
  where sk.seckill_id=#{seckillId}
  </select>
</mapper>